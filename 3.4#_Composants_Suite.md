# Les composants

## DÃ©finitions : 
Un composant en React est un bloc de code rÃ©utilisable qui permet de structurer et dâ€™organiser une interface utilisateur (UI). ***Chaque composant reprÃ©sente une partie spÃ©cifique de lâ€™interface, comme un bouton, un formulaire ou un en-tÃªte***. Un composant en React peut Ãªtre une fonction ou une classe et peut contenir des Ã©lÃ©ments HTML, des styles, ainsi que de la logique pour gÃ©rer lâ€™Ã©tat et les interactions de lâ€™utilisateur. Leur cycle de vie se compose de trois phases majeures : 
* le composant est montÃ© lorsquâ€™il est ajoutÃ© Ã  lâ€™Ã©cran
* il est mis Ã  jour quand il reÃ§oit de nouvelles props ou variables dâ€™Ã©tat, gÃ©nÃ©ralement Ã  la suite dâ€™une interaction
* il est dÃ©montÃ© quand il est retirÃ© de lâ€™Ã©cran

#### Les deux types de composants :

1. **Composants de classe** : Ce sont des classes qui Ã©tendent la classe `React.Component` et qui utilisent une mÃ©thode `render()` pour renvoyer du `JSX`. Ce type de composant est moins courant aujourd'hui, car les `Hooks` permettent de gÃ©rer l'Ã©tat et les effets dans les composants fonctionnels. 
 
Exemple :

```jsx
import React from 'react';

class Salut extends React.Component {
  render() {
    return <h1>Bonjour, {this.props.nom}!</h1>;
  }
}

```


2. **Composants fonctionnels** : Ce sont des fonctions JavaScript qui renvoient du JSX pour dÃ©crire lâ€™UI. Les composants fonctionnels sont souvent utilisÃ©s de nos jours en raison de leur simplicitÃ© et de leur facilitÃ© dâ€™utilisation avec les hooks. 
   
Exemple :
 
```jsx
function Salut() {
  return <h1>Bonjour, Boss !</h1>;
}

```

Un composant, c'est trois parties essentielles : 
* le state (Ã©tats, donnÃ©es)
* comportements
* affichage (render) : rendu possbile via le mot clÃ© `return`

## PremiÃ¨res manipulations
Dans cette partie du cours, nous allons dÃ©couvrir notre premier `hook`, le `useState`.

1. DÃ©limittons par des commentaires les trois parties de notre composant
2. Ce qu'il faut savoir sur `useState`
Le hook `useState` est l'un des hooks les plus utilisÃ©s en `React`, et il permet de gÃ©rer l'Ã©tat d'un composant fonctionnel. Il retourne un tableau avec deux Ã©lÃ©ments.
```jsx
const [state, setState] = useState(initialState);
``` 
* `initialState` : La valeur initiale de l'Ã©tat. Cela peut Ãªtre une valeur primitive (comme un nombre ou une chaÃ®ne de caractÃ¨res), un tableau, un objet, etc.

* `state` (l'Ã©tat actuel) : La variable qui contient la valeur actuelle de l'Ã©tat.

* `setState` (le setter d'Ã©tat) : La fonction qui permet de mettre Ã  jour l'Ã©tat.

Nous allons dÃ©finir un state, que nous allons **initialiser** Ã  `1`. Cette valeur sera rÃ©cupÃ©rÃ©e dans la variable `compteur`. Variable qu'on pourra assez facilement modifier grÃ¢ce Ã  la fonction `setCompteur`.

3. *Projettons* (affichons) la variable compteur sur notre interface. 
4. Et si on jouait un peu ?! 
   * Ajoutons un bouton qui va nous permettre d'incrÃ©menter la valeur de notre variable `compteur`
   * Nous avons besoin de dÃ©finir un "comportement" pour rendre effective cette incrÃ©mentation. Par convention, nous appelerons ce "comportement" `handleClick`.
   * Avec l'Ã©couteur d'Ã©vÃ©nement `onClick` pour lier notre "comportement" au clique de notre bouton.
   * RemplaÃ§ons par `let` le mot clÃ© ayant servi Ã  la dÃ©claration du tableau permette de rÃ©cupÃ©rer le return de notre `ustState`
   * VoilÃ  Ã  quoi doit ressembler notre comportement `handleClick` : 
```jsx
     const handleClick = () => {
    // alert("handleClick");
    console.log("compteur", compteur);
    compteur += 1;
    console.log("compteur", compteur);
  }
``` 
Dans la console, nous voyons bien que `compteur` est modifiÃ©e mais sans que cela n'impacte le rendu. Cela est dÃ» au fait qu'on ne modifie **JAMAIS** un state directement. On utilise **TOUJOURS** son `setter` dÃ©diÃ©. En faisant ainsi, le `setter` va modifier la valeur du `state` auquel il est liÃ© mais cela aura pour consÃ©quence de "pousser" le composant Ã  **REAGIR** en actualisant **AUTOMATIQUEMENT** l'affichage. 
```jsx
 const handleClick = () => {
    setCompteur(compteur + 1);
  }
```
   * IncrÃ©mentons maintenant notre `compteur` Ã  chaque clique du bouton ! EurÃªka, mon code marche mainteant âœŒâœŒâœŒâœŒ

On ira plus loin avec notre application. Et si on mettait en place une calculatrice ?

* Supprimons le contenu de notre composant. le render doit contenir le code suivant : 
 
```jsx
  <div className="calculator">
      <div className="display"></div>
      <div className="buttons">
        <button >1</button>
        <button >2</button>
        <button >3</button>
        <button >+</button>
        <button >4</button>
        <button >5</button>
        <button >6</button>
        <button >-</button>
        <button >7</button>
        <button >8</button>
        <button >9</button>
        <button >*</button>
        <button >0</button>
        <button >=</button>
        <button >/</button>
        <button >C</button>
      </div>
    </div> 
``` 

* RÃ©cupÃ©rer le code css suivant pour mieux styliser notre calculatrice 

```css 
.calculator {
  width: 250px;
  margin: 50px auto;
  padding: 20px;
  border: 2px solid #000;
  border-radius: 10px;
  background-color: #f9f9f9;
}

.display {
  height: 40px;
  text-align: right;
  font-size: 20px;
  margin-bottom: 20px;
  padding: 5px;
  background-color: #eaeaea;
  border: 1px solid #ccc;
}

.buttons button {
  width: 40px;
  height: 40px;
  font-size: 18px;
  margin: 5px;
  cursor: pointer;
  border: none;
  border-radius: 5px;
  background-color: #f1f1f1;
}

.buttons button:hover {
  background-color: #dcdcdc;
}
``` 

**Ã€ l'heure actuelle, nous avons une calculatrice, mais elle ne remplit pas encore toutes ses fonctions attendues. Nous allons travailler sur son amÃ©lioration.**

Pour que la calculatrice fonctionne correctement, nous aurons besoin de :

* RÃ©cupÃ©rer chacune des valeurs sur lesquelles l'utilisateur clique.

* RÃ©cupÃ©rer l'opÃ©rateur choisi par l'utilisateur.

* Permettre de supprimer les valeurs saisies.
 
* Soumettre l'opÃ©ration pour effectuer le calcul.
 

  
#### 1. RÃ©cupÃ©rer chacune des valeurs sur lesquelles l'utilisateur clique (handleNumberClick)
#### 2. RÃ©cupÃ©rer l'opÃ©rateur choisi par l'utilisateur (handleOperatorClick)
#### 3. Permettre de supprimer les valeurs saisies (handleClear)
#### 4. Soumettre l'opÃ©ration pour effectuer le calcul (handleEqualClick)


Maintenant que la caulculatrice fonctionne, c'est bien beau tout cela mais on peut faire encore mieux. On va incrÃ©menter le niveau en modularisant le code. La structure de fichier que nous aurons Ã  la fin : 

```css
src/
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Button.js
â”‚   â”œâ”€â”€ Display.js
â”‚   â””â”€â”€ Calculator.js
â”‚
â””â”€â”€ App.js

```
Cette partie nous permettra d'aborder les `props` en React.

##### Plan de modularisation
1. CrÃ©er un composant `Button` :
   * Ce composant reprÃ©sentera un bouton.

   * Il recevra en props une `label` (le texte du bouton) et une fonction `onClick` qui sera exÃ©cutÃ©e lorsque l'utilisateur clique dessus. 

2. CrÃ©er un composant `Display` :

    * Ce composant affichera l'Ã©tat actuel de la calculatrice (les chiffres ou le rÃ©sultat). 

3.  CrÃ©er un composant `Calculator` :

    * Ce composant va gÃ©rer l'Ã©tat (comme `operatorDeux`, `display`, etc.) et assembler les autres composants (`Button`, `Display`).


##### Exercice : 

**PrÃ©sentation de "SnapShot"**

![Snapshot en image](./img/snapshot_image.PNG)

`SnapShot` est une application innovante qui permet aux utilisateurs de rechercher des images automatiquement grÃ¢ce Ã  une API.

Elle facilite l'accÃ¨s Ã  une large bibliothÃ¨que d'images en ligne, offrant une expÃ©rience fluide et rapide pour trouver l'image idÃ©ale en quelques clics. Voici un exemple du rÃ©sultat final :


Pour commencer, rÃ©visons les concepts que nous avons abordÃ©s jusqu'ici. Vous allez rÃ©cupÃ©rer le dossier exo_1_images et l'utiliser dans un nouveau projet React que vous allez crÃ©er, nommÃ© SnapShot ğŸ˜ğŸ˜ğŸ˜.

En plus du composant principal qui affichera le titre (h1), vous devrez mettre en place deux autres composants :

* Un composant pour l'affichage des boutons.

* Un autre composant pour afficher les images liÃ©es au bouton sÃ©lectionnÃ©.

A vous de jouer 