## Bon Ã  savoir : 

| Type d'Input	| DÃ©finition |
|---------------|------------|
| **Input contrÃ´lÃ©**	|L'input est liÃ© Ã  un `useState` â†’ chaque modification **dÃ©clenche un rendu React**.
| **Input incontrÃ´lÃ©**	| L'input est **gÃ©rÃ© par une** `ref`, sans passer par React â†’ React ne suit pas son contenu en temps rÃ©el.


ğŸ›  **Voici ce qu'on va construire maintenant** :

On va ajouter **un champ** `<input>` **contrÃ´lÃ©** au-dessus de ta calculatrice pour :

* Saisir une formule complÃ¨te (ex: `12+5`).

* Valider et calculer directement via ce champ.

Et **un input incontrÃ´lÃ©** pour :

* Un champ cachÃ© ou une saisie rapide directe, **sans mettre Ã  jour l'Ã©tat React** en temps rÃ©el.

ğŸ“¦ **Modification du projet**
1. CrÃ©er un `useState` pour l'input contrÃ´lÃ©
Dans `Calculator.jsx`, ajoute en haut :

```jsx
const [manualInput, setManualInput] = React.useState('');
const manualInputRef = React.useRef();

```
âœ… `manualInput` sera ton input contrÃ´lÃ©

âœ… `manualInputRef` sera ton input incontrÃ´lÃ©.

2. Ajout de champs dans le rendu

Juste avant ton `<Display />`, ajoute :

```jsx
<div style={{ marginBottom: '10px' }}>
  {/* Input contrÃ´lÃ© */}
  <input
    type="text"
    placeholder="Tapez votre opÃ©ration (ex: 3+2)"
    value={manualInput}
    onChange={(e) => setManualInput(e.target.value)}
    style={{ width: '100%', padding: '5px', marginBottom: '5px' }}
  />

  {/* Boutons d'action */}
  <div style={{ display: 'flex', gap: '10px' }}>
    <button onClick={handleControlledSubmit}>Calculer ContrÃ´lÃ©</button>
  </div>
</div>
```

3. CrÃ©er les fonctions d'action

Dans `Calculator.jsx`, ajoute en dessous de tes fonctions :

```jsx
const handleControlledSubmit = () => {
  if (manualInput) {
    try {
      const calculated = eval(manualInput);
      setResult(calculated);
    } catch (error) {
      setErrorMessage("Erreur de saisie !");
    }
  }
};

```
* `handleControlledSubmit()` utilise la valeur de l'input contrÃ´lÃ© (liÃ© au `useState`).

ğŸ‘€ğŸ‘€ğŸ‘€ğŸ‘€ğŸ‘€ğŸ‘€ğŸ‘€ Le code ne marche pas ğŸ‘€ğŸ‘€ğŸ‘€ğŸ‘€ğŸ‘€ğŸ‘€ğŸ‘€ğŸ‘€ğŸ‘€ğŸ‘€ğŸ‘€ğŸ‘€ğŸ‘€

ğŸ¯ Le problÃ¨me

Quand tu tapes au clavier, les touches vont sur lâ€™Ã©cran de la calculatrice (le handleKeyDown capte tout)

ğŸ‘‰ MÃªme si ton curseur est dans un champ `<input>`, la calculatrice intercepte l'Ã©vÃ©nement clavier.

âœ… Solution propre

Il faut ignorer le traitement du clavier si le focus est dÃ©jÃ  dans un input.

âœ… Modifier handleKeyDown comme ceci :

```jsx
const handleKeyDown = (event) => {
  const target = event.target;

  // â— Ne pas interfÃ©rer si l'utilisateur est en train de taper dans un input ou textarea
  if (target.tagName === "INPUT" || target.tagName === "TEXTAREA") {
    return;
  }

};

```
```jsx
<div style={{ marginBottom: '10px' }}>

  {/* Input incontrÃ´lÃ© */}
  <input
    type="text"
    ref={manualInputRef}
    placeholder="Input rapide (pas suivi par React)"
    style={{ width: '100%', padding: '5px', marginBottom: '10px' }}
  />

  {/* Boutons d'action */}
  <div style={{ display: 'flex', gap: '10px' }}>
    {/* ... */}
    <button onClick={handleUncontrolledSubmit}>Calculer IncontrÃ´lÃ©</button>
  </div>
</div>
```



```jsx
const handleUncontrolledSubmit = () => {
  if (manualInputRef.current && manualInputRef.current.value) {
    try {
      const calculated = eval(manualInputRef.current.value);
      setResult(calculated);
    } catch (error) {
      setErrorMessage("Erreur de saisie !");
    }
  }
};

```
* `handleUncontrolledSubmit()` utilise directement la valeur de l'input via `ref`, sans passer par React.

âš–ï¸ Input contrÃ´lÃ© vs Input incontrÃ´lÃ© â€” le vrai comparatif

<img src="./img/inputControleVSIncontrole"  />

ğŸ“š RÃ©sumÃ© clair

âœ… Input contrÃ´lÃ©

UtilisÃ© quand :

  * Tu veux **valider ou filtrer en temps rÃ©el**

  * Tu veux afficher des erreurs, auto-complÃ©tion, ou champs conditionnels

  * Tu as besoin de **logique rÃ©active Ã  chaque frappe**

**Exemples** :

  * Saisie de nom ou mot de passe

  * Formulaires de paiement

  * Barre de recherche avec suggestions


âœ… Input incontrÃ´lÃ©

UtilisÃ© quand :

  * Tu veux juste **rÃ©cupÃ©rer la valeur au moment de la soumission**

  * Tu nâ€™as **pas besoin de valider ou rÃ©agir Ã  chaque changement**

  * Tu veux **Ã©viter des re-renders** inutiles (optimisation)

**Exemples** :

  * Upload de fichier

  * Champ de recherche simple

  * Formulaires embarquÃ©s dans du contenu statique